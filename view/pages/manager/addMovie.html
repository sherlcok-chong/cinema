<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>增加影片</title>
</head>
<body>
<div><a style="text-decoration: none " onclick=ret() href="#">返回</a> <a href="/logout" style="text-decoration: none ">退出登录</a>
</div>
<p style="font-size: 50px;text-align:center;">增加电影</p>
<form action="/addMovie" method="post" enctype="multipart/form-data" id="form">
    <div style="text-align: center;height: 50px">
        电影名：<input type="text" style="height: 30px;width: 200px" name="movieName"><span id="nameErr"></span>
        <br>
        <br>
        选择评分：
        <select name="ge">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
        </select>
        .
        <select name="point">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
        </select>
        <br>
        <br>
        添加电影海报：<input type="file" name="picture">
        <br>
        <span id="imgErr" style="color: red"></span>
        <br>
        是否上映？ 是<input type="radio" name="flag" checked="checked" value="0"> 否<input type="radio" name="flag" value="1 ">
        <br>
        <br>
        上映时间： <input type="date" name="release"><span id="errMsg"></span>
        <br>
        <br>
        影片长度：<input type="text" style="height: 30px;width: 200px" name="timelong">分钟
        <br>
        <span id="timeErr" style="color: red"></span>
        <br>
        下映时间：<input type="date" name="offtime">
        <br>
        <br>
        <input type="submit">
        {{if.}}
        <p style="font-size: 50px;text-align:left;" >增加成功</p>
        {{end}}
    </div>
</form>

<script>
    function ret() {
        window.history.back();
    }

    document.getElementById("form").onsubmit = function () {
        let r = document.getElementsByName("release")[0].value
        let o = document.getElementsByName("offtime")[0].value
        if (r > o||r===""||o==="") {
            err = document.getElementById("errMsg")
            err.innerHTML = "时间信息错误"
            return false
        }
        let name = document.getElementsByName("movieName")[0].value
        if (name===""){
            err = document.getElementById("nameErr")
            err.innerHTML = "电影名格式错误"
            return false
        }
        let money =document.getElementsByName("timelong")[0].value
        const len = /^\d{1,3}$/
        if (!len.test(money)){
            let err = document.getElementById("timeErr")
            err.innerHTML = "输入正确的时间"
            return false
        }
        let img = document.getElementsByName("picture")[0].value
        if (img===""){
            err = document.getElementById("imgErr")
            err.innerHTML = "请添加海报"
            return false
        }
    }
</script>
</body>
</html>



